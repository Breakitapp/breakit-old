script(type='text/javascript', src='http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js')
script(type='text/javascript', src='http://maps.google.com/maps/api/js?sensor=false')

script(type='text/javascript')
  
  var startPos;
  var latlng;
  var gcoder;
  var map;
  var infowindow = new google.maps.InfoWindow();
  
  $('document').ready(function() {
  if (navigator.geolocation) {
    console.log('Geolocation is supported!');
    navigator.geolocation.getCurrentPosition(function(position) {
      startPos = position;
      jQuery("#location_latitude").append(startPos.coords.latitude);
      jQuery("#location_longitude").append(startPos.coords.longitude);
      console.log(startPos.coords.latitude);
      console.log(startPos.coords.longitude);
      loadAdd();
    });
  }});
    
  var loadAdd = function() {
    map = new google.maps.Map(document.getElementById("map_canvas"));    
    gcoder = new google.maps.Geocoder();
    latlng = new google.maps.LatLng(startPos.coords.latitude, startPos.coords.longitude);
    gcoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
        document.getElementById("map_canvas").innerHTML= "You are located in :  " + results[1].formatted_address;
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
   }
   
div(id='map_canvas')
    
form(name='input', method='post', action= '/splash_screen')
  input(type='email', name='email_field', value='email here');
  input(type='submit', name='submit_button', value='Submit');