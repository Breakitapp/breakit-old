script(type='text/javascript', src='http://maps.google.com/maps/api/js?sensor=false')
script(type='text/javascript')
  
  var startPos;
  var latlng;
  var gcoder;
  var map;
  var infowindow = new google.maps.InfoWindow();
  
  $('document').ready(function() {
  if (navigator.geolocation) {
    console.log('Geolocation is supported!');
    navigator.geolocation.getCurrentPosition(function(position) {
      startPos = position;
      jQuery("#location_latitude").append(startPos.coords.latitude);
      jQuery("#location_longitude").append(startPos.coords.longitude);
      console.log(startPos.coords.latitude);
      console.log(startPos.coords.longitude);
      $.post('/', {lon: startPos.coords.longitude, lat: startPos.coords.latitude}, function(data) {
        $('#newsfeed').html(data);
      });
    });
  }});
    
  var loadAdd = function() {
    map = new google.maps.Map(document.getElementById("map_canvas"));    
    gcoder = new google.maps.Geocoder();
    latlng = new google.maps.LatLng(startPos.coords.latitude, startPos.coords.longitude);
    gcoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
        document.getElementById("map_canvas").innerHTML= "You are located in :  " + results[1].formatted_address;
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
   }

